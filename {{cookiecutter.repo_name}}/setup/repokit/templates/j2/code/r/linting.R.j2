{% raw %}
#!/usr/bin/env Rscript
# Auto-generated from linting.R.j2

args <- commandArgs(trailingOnly = FALSE)
file_arg <- grep("^--file=", args, value = TRUE)
script_path <- if (length(file_arg)) substring(file_arg, 8) else normalizePath(".")
PROJECT_ROOT <- normalizePath(file.path(dirname(script_path), ".."), winslash = "/", mustWork = FALSE)
R_DIR <- file.path(PROJECT_ROOT, "R")

cat(sprintf("PROJECT_ROOT: %s\n", PROJECT_ROOT))
cat(sprintf("R_DIR: %s\n\n", R_DIR))

if (!requireNamespace("lintr", quietly = TRUE)) {
  message('ERROR: lintr is not installed. In R: install.packages("lintr")')
  quit(status = 2)
}

if (!dir.exists(R_DIR)) {
  message(sprintf("Info: R directory not found: %s (skipping)", R_DIR))
  quit(status = 0)
}

cat("[lintr] lint_dir()\n\n")
l <- lintr::lint_dir(path = R_DIR)
print(l)
quit(status = if (length(l) > 0) 1 else 0)

{% endraw %}